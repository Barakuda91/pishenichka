<script type="text/x-template" id="edit_cultivations">
    <transition name="modal">
        <div class="modal-mask">
            <div class="modal-wrapper">
                <div class="modal-container">

                    <div class="modal-header">
                        <slot name="header">
                            <h3 slot="header">{{ _('FIELD_EDIT_TITLE') }} {{ _(production.entity.title) }}</h3>
                        </slot>
                    </div>

                    <div class="modal-body" style="overflow-y: scroll; max-height: 50vh">
                        <slot name="body">
                            <p>{{ _('PRODUCTION_EDIT_TEXT_1') }}</p>
                            <p>Рецепты</p>
                            <div class="row">
                                <div class="col-sm-1 text-small">склад</div>
                                <div class="col-sm-3 text-small">сырье</div>
                                <div class="col-sm-1 text-small">склад</div>
                                <div class="col-sm-3 text-small">продукция</div>
                                <div class="col-sm-1 text-small">дни</div>
                                <div class="col-sm-1 text-small">стоимость</div>
                                <div class="col-sm-2 text-small"></div>
                            </div>
                            <div class="row text-smaller" style="border-bottom: 1px solid silver"
                                 v-for="(recipe, i) of production.entity.recipes"
                                 v-bind:class="{
                                        'text-success': production.cycles && production.cycles[recipe.name],
                                        'text-danger': enoughRawMaterials[recipe.name]
                                    }"
                            >
                                <div class="col-sm-1">
                                        <span v-for="(amount, product) of recipe.inputProducts">
                                            {{ user.warehouse[product] || 0}}
                                        </span>
                                </div>
                                <div class="col-sm-3">
                                        <span v-for="(amount, product) of recipe.inputProducts">
                                            {{ _(product) }}[{{ amount * sector.size }}]
                                        </span>
                                </div>

                                <div class="col-sm-1">
                                        <span v-for="(amount, product) of recipe.outputProducts">
                                            {{ user.warehouse[product] || 0}}
                                        </span>
                                </div>
                                <div class="col-sm-3">
                                        <span v-for="(amount, product) of recipe.outputProducts">
                                            {{ _(product) }}[{{ amount * sector.size }}]
                                        </span>
                                </div>

                                <div class="col-sm-1">{{ recipe.cycleDuration }}</div>
                                <div class="col-sm-1">{{ recipe.cost * sector.size }}</div>
                                <div class="col-sm-2">
                                    <button v-if="!production.cycles || !production.cycles[recipe.name]" @click="startCycle(i, production._id)" class="btn btn-sm btn-outline-success">запустить</button>
                                    <button v-if="production.cycles && production.cycles[recipe.name]" @click="stopCycle(i, production._id)" class="btn btn-sm btn-outline-success">остановить</button>
                                </div>

<!--                                <div v-if="production.cycles && production.cycles[recipe.name]">{{production.cycles[recipe.name].progress}}</div>-->
                                <div v-if="production.cycles && production.cycles[recipe.name]" class="progress" style="height: 2px;">
                                    <div class="progress-bar bg-success" role="progressbar" v-bind:style="{ width: production.cycles[recipe.name].progress + '%' }" v-bind:aria-valuenow="production.cycles[recipe.name].progress" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>

                            </div>
                        </slot>
                    </div>

                    <div class="modal-footer">
                        <slot name="footer">
                            <button class="modal-default-button" @click="$emit('close')" style="width: 25%;">
                                отмена
                            </button>
                            <!--                            <button class="modal-default-button" v-bind:disabled="createdisabled" @click="edit()" style="width: 25%;">-->
                            <!--                                сохранить-->
                            <!--                            </button>-->
                        </slot>
                    </div>
                </div>
            </div>
        </div>
    </transition>
</script>

